<div class="d-flex align-items-center justify-content-between mb-4">
	<h1 mat-dialog-title class="mb-0">{{ data ? 'Editar Produto' : 'Cadastrar Produto'}}</h1>
	<button mat-icon-button (click)="dialogRef.close()">
		<mat-icon>close</mat-icon>
	</button>
</div>

<form [formGroup]="form">
	<div class="row">
		<div class="col-md-12">
			<mat-form-field>
				<mat-label>Nome</mat-label>
				<input matInput formControlName="name" [errorStateMatcher]="_formValidation" required>
				<mat-error *ngIf="form.touched && form.invalid">
					Informe o Nome do Produto
				</mat-error>
			</mat-form-field>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<mat-form-field>
				<mat-label>Categoria</mat-label>
				<mat-select formControlName="category" [errorStateMatcher]="_formValidation" required>
					<mat-option *ngFor="let cat of categories" [value]="cat.id">
						{{cat.name}}
					</mat-option>
				</mat-select>
				<mat-error *ngIf="form.touched && form.invalid">
					Informe a Categoria do Produto
				</mat-error>
			</mat-form-field>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<mat-form-field>
				<mat-label>Preço de Custo</mat-label>
				<input matInput formControlName="cost_price" prefix="R$ " mask="separator.2" thousandSeparator="."
					[errorStateMatcher]="_formValidation" required>
				<mat-error *ngIf="form.touched && form.invalid">
					Informe o Preço de Custo do Produto
				</mat-error>
			</mat-form-field>
		</div>
		<div class="col-md-6">
			<mat-form-field>
				<mat-label>Preço de Venda</mat-label>
				<input matInput formControlName="sale_price" prefix="R$ " mask="separator.2" thousandSeparator="."
					[errorStateMatcher]="_formValidation" required>
				<mat-error *ngIf="form.touched && form.invalid">
					Informe o Preço de Venda do Produto
				</mat-error>
			</mat-form-field>
		</div>
		<div class="col-md-6">
			<mat-form-field>
				<mat-label>Quantidade</mat-label>
				<input matInput formControlName="quantity" mask="separator" thousandSeparator="."
					[errorStateMatcher]="_formValidation" required>
				<mat-error *ngIf="form.touched && form.invalid">
					Informe a Quantidade do Produto
				</mat-error>
			</mat-form-field>
		</div>
	</div>
	<div class="row">
		<mat-form-field>
			<mat-label>Descrição</mat-label>
			<textarea matInput formControlName="description"></textarea>
		</mat-form-field>
	</div>
	<div class="row">
		<mat-form-field>
			<mat-label>Imagem</mat-label>
			<ngx-mat-file-input formControlName="image" [errorStateMatcher]="_formValidation" accept="image/*"
				[required]="true">
			</ngx-mat-file-input>
			<mat-error *ngIf="form.touched && form.invalid">
				Adicione uma imagem
			</mat-error>
		</mat-form-field>
	</div>
	<div class="row">
		<div class="col-12">
			<mat-slide-toggle #status formControlName="active">
				Ativo
				<ng-container *ngIf="status.checked; else elseTemplate">
					<span class="text-success">Sim</span>
				</ng-container>
				<ng-template #elseTemplate>
					<span class="text-danger">Não</span>
				</ng-template>
			</mat-slide-toggle>
		</div>
	</div>
	<div class="d-flex justify-content-end">
		<button mat-raised-button (click)="saveProduct()" color="primary" [disabled]="form.invalid">Salvar</button>
	</div>
</form>